define("qtype_ddingroups/dragreorder",["exports","jquery","core/str","core/prefetch"],(function(_exports,_jquery,_str,_prefetch){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};class DragReorder{constructor(config){this.config=config,this.draggingElement=null,this.sourceContainer=null,this.lists=document.querySelectorAll(this.config.lists.join(",")),this.initEventListeners()}initEventListeners(){this.lists.forEach((list=>{list.addEventListener("dragover",this.handleDragOver.bind(this)),list.addEventListener("drop",this.handleDrop.bind(this)),list.addEventListener("dragleave",this.handleDragLeave.bind(this))}));document.querySelectorAll(this.config.item).forEach((item=>{item.addEventListener("dragstart",this.handleDragStart.bind(this)),item.addEventListener("dragend",this.handleDragEnd.bind(this))}))}handleDragStart(e){this.draggingElement=e.target,this.sourceContainer=e.target.closest("ul.sortablelist"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",e.target.id),this.draggingElement.classList.add("dragging")}handleDragEnd(){this.draggingElement&&(this.draggingElement.classList.remove("dragging"),this.draggingElement.closest(".sortablelist")||this.sourceContainer.appendChild(this.draggingElement),this.updateResponse()),this.draggingElement=null,this.sourceContainer=null}handleDragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="move";const targetList=e.currentTarget;targetList.classList.contains("sortablelist")&&targetList.classList.add("drag-over")}handleDragLeave(e){const targetList=e.currentTarget;targetList.classList.contains("sortablelist")&&targetList.classList.remove("drag-over")}handleDrop(e){e.preventDefault();const targetList=e.currentTarget;targetList.classList.contains("sortablelist")&&(targetList.appendChild(this.draggingElement),targetList.classList.remove("drag-over"),this.updateResponse())}updateResponse(){const response={};this.lists.forEach((list=>{const groupId=list.id;response[groupId]=Array.from(list.querySelectorAll(this.config.item)).map((item=>item.id))}));document.querySelector("#".concat(this.config.responseid)).value=JSON.stringify(response)}static init(config){new DragReorder(config)}}return _exports.default=DragReorder,_exports.default}));

//# sourceMappingURL=dragreorder.min.js.map